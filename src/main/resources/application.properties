spring.application.name=badger

# Temporary H2 database for testing
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.h2.console.enabled=true
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop

# Original PostgreSQL configuration (commented out for now)
# spring.datasource.url=jdbc:postgresql://10.21.34.171:5432/badge_manager
# spring.datasource.username=postgres
# spring.datasource.password=lokya
# spring.datasource.driver-class-name=org.postgresql.Driver
# spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
# spring.jpa.hibernate.ddl-auto=update

springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true

server.port=8080

# SMTP configuration for password reset emails (Outlook)
spring.mail.host=smtp-mail.outlook.com
spring.mail.port=587
spring.mail.username=appadmin@taashee.com
spring.mail.password=moodle@123
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.from=appadmin@taashee.com

# Password reset token expiry (in minutes)
app.resetPassword.expiryMinutes=30

# UI base URL for email links and redirection
app.uiBaseUrl=http://localhost:5173

# CORS Configuration
spring.web.cors.allowed-origins=http://localhost:5173,http://localhost:3000
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true
spring.web.cors.max-age=3600

# Google OAuth2 configuration
spring.security.oauth2.client.registration.google.client-id=951709574279-nbnnau6ate1q6bop2q3e3gvilr81p8gt.apps.googleusercontent.com
spring.security.oauth2.client.registration.google.client-secret=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
spring.security.oauth2.client.registration.google.scope=openid,profile,email
spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/login/oauth2/code/google
spring.security.oauth2.client.registration.google.client-name=Google
spring.security.oauth2.client.provider.google.authorization-uri=https://accounts.google.com/o/oauth2/v2/auth
spring.security.oauth2.client.provider.google.token-uri=https://oauth2.googleapis.com/token
spring.security.oauth2.client.provider.google.user-info-uri=https://openidconnect.googleapis.com/v1/userinfo
spring.security.oauth2.client.provider.google.user-name-attribute=sub

# Default password for newly created staff users
staff.default.password=Taashee@123

# === ENTERPRISE-GRADE API INTEGRATION CONFIGURATION ===

# Organization API Integration Settings
app.api.integration.default-timeout=30000
app.api.integration.max-retries=3
app.api.integration.retry-delay=5000
app.api.integration.connection-pool-size=20
app.api.integration.max-connections-per-route=10
app.api.integration.connection-timeout=30000
app.api.integration.read-timeout=60000

# 2-Way Sync Configuration
app.sync.default-frequency-minutes=30
app.sync.batch-size=100
app.sync.max-concurrent-operations=10
app.sync.retry-failed-syncs=true
app.sync.failed-sync-retry-delay=300000

# Real-time Update Configuration
app.realtime.enabled=true
app.realtime.webhook-timeout=10000
app.realtime.max-webhook-retries=3
app.realtime.event-queue-size=1000

# Badge Integration Settings
app.badge.integration.enabled=true
app.badge.auto-issue-on-completion=true
app.badge.verification-timeout=15000
app.badge.issue-retry-attempts=3

# Course/Assignment Integration
app.course.integration.enabled=true
app.course.cache-duration-minutes=60
app.course.max-cache-size=1000
app.assignment.integration.enabled=true
app.test.integration.enabled=true

# === ENTERPRISE MONITORING & HEALTH CHECKS ===

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.endpoint.health.show-components=always
management.health.api-integration.enabled=true
management.health.sync-status.enabled=true

# Health Check Timeouts
management.health.defaults.timeout=10s
management.health.db.timeout=5s
management.health.diskspace.threshold=10MB

# Metrics Configuration
management.metrics.export.prometheus.enabled=true
management.metrics.tags.application=${spring.application.name}
management.metrics.tags.environment=production

# === ENTERPRISE CACHING CONFIGURATION ===

# Cache Settings
spring.cache.type=caffeine
spring.cache.cache-names=organization-api-configs,pathway-progress,course-details,badge-details
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=1h,expireAfterAccess=30m

# === ENTERPRISE LOGGING CONFIGURATION ===

# Logging Levels
logging.level.com.taashee.badger=INFO
logging.level.com.taashee.badger.services.OrganizationApiIntegrationService=DEBUG
logging.level.com.taashee.badger.controllers.OrganizationApiConfigController=DEBUG
logging.level.org.springframework.web.client.RestTemplate=DEBUG
logging.level.org.apache.http=WARN

# Logging Pattern
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# === ENTERPRISE PERFORMANCE CONFIGURATION ===

# JPA/Hibernate Optimization
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=true

# Connection Pool Settings
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# === ENTERPRISE SECURITY CONFIGURATION ===

# API Security
app.security.api.rate-limit.enabled=true
app.security.api.rate-limit.requests-per-minute=100
app.security.api.rate-limit.burst-size=20

# Token Security
app.security.jwt.expiration=86400000
app.security.jwt.refresh-expiration=604800000
app.security.jwt.secret=your-256-bit-secret-key-here-change-in-production

# === ENTERPRISE ERROR HANDLING ===

# Error Handling
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=never
server.error.include-exception=false

# === ENTERPRISE FEATURE FLAGS ===

# Feature Toggles
app.features.2way-sync.enabled=true
app.features.realtime-updates.enabled=true
app.features.badge-integration.enabled=true
app.features.course-integration.enabled=true
app.features.advanced-analytics.enabled=true
app.features.batch-operations.enabled=true
